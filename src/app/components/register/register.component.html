<section class="py-4 bg-main-light p-4 rounded-4 my-4 mx-auto">
    <h1 class="h3 fw-bold mb-3 text-main">Register Now: </h1>
    <form [formGroup]="registerForm" (ngSubmit)="registerSubmit()" class="p-3">
        <div class="mb-3">
            <label for="name" class="mb-1">Name: </label>
            <input [ngClass]="{ 'is-invalid': registerForm.get('name')?.dirty && registerForm.get('name')?.errors ,
                'is-valid': registerForm.get('name')?.dirty && !registerForm.get('name')?.errors}"
                formControlName="name" type="name" class="form-control" placeholder="Enter your name" />

            @if(registerForm.get('name')?.touched || registerForm.get('name')?.dirty){
            <div>
                @if(registerForm.get('name')?.getError('required')){
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Name is
                    required.</small>
                }
                @else if (registerForm.get('name')?.getError('minlength') ||
                registerForm.get('name')?.getError('maxlength')) {
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Name should be 3
                    to 20 characters.</small>
                }
            </div>
            }
        </div>
        <div class="mb-3">
            <label for="email" class="mb-1">Email: </label>
            <input [ngClass]="{ 'is-invalid': registerForm.get('email')?.dirty && registerForm.get('email')?.errors ,
                'is-valid': registerForm.get('name')?.dirty && !registerForm.get('email')?.errors}"
                formControlName="email" type="email" class="form-control" placeholder="Enter your email" />

            @if(registerForm.get('email')?.touched || registerForm.get('email')?.dirty){
            <div>
                @if(registerForm.get('email')?.getError('required')){
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Email is
                    required.</small>
                }
                @else if (registerForm.get('email')?.getError('email')) {
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Enter a valid
                    email.</small>
                }
            </div>
            }
        </div>
        <div class="mb-3">
            <label for="phone" class="mb-1">Phone: </label>
            <input [ngClass]="{ 'is-invalid': registerForm.get('phone')?.dirty && registerForm.get('phone')?.errors ,
                'is-valid': registerForm.get('name')?.dirty && !registerForm.get('phone')?.errors}"
                formControlName="phone" type="tel" class="form-control" placeholder="Enter your phone" maxlength="11" />
            @if(registerForm.get('phone')?.touched || registerForm.get('phone')?.dirty){
            <div>
                @if(registerForm.get('phone')?.getError('required')){
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Phone is
                    required.</small>
                }
                @else if (registerForm.get('phone')?.getError('pattern')) {
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Enter a valid
                    phone number.</small>
                }
            </div>
            }

        </div>
        <div class="mb-3">
            <label for="password" class="mb-1">Password: </label>
            <input [ngClass]="{ 'is-invalid': registerForm.get('password')?.dirty && registerForm.get('password')?.errors ,
                'is-valid': registerForm.get('name')?.dirty && !registerForm.get('password')?.errors}"
                formControlName="password" type="password" class="form-control" placeholder="Enter your password" />

            @if(registerForm.get('password')?.touched && registerForm.get('password')?.dirty){
            <div>
                @if(registerForm.get('password')?.getError('required')){
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Password is
                    required.</small>
                }
                @else if(registerForm.get('password')?.getError('pattern')){
                <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Password must be
                    at least 6 characters.</small>
                }
            </div>
            }
        </div>
        <div class="mb-3">
            <label for="repassword" class="mb-1">Re-Password: </label>
            <input [ngClass]="{ 'is-invalid': registerForm.get('rePassword')?.dirty && registerForm.getError('mismatch') ,
                'is-valid': registerForm.get('rePassword')?.dirty && !registerForm.getError('mismatch')}"
                formControlName="rePassword" type="password" class="form-control"
                placeholder="Re-enter your password" />

            @if((registerForm.get('rePassword')?.touched || registerForm.get('rePassword')?.dirty) &&
            registerForm.getError('mismatch')){
            <small class="text-danger ms-2 mb-0"><i class="fa-solid fa-circle-exclamation me-2"></i>Password does not
                match.</small>
            }
        </div>

            <button [disabled]="registerForm.invalid || isLoading" type="submit"
                class="btn-main d-block ms-auto text-nowrap mt-4">Register
                @if (isLoading) {<span><i class="fas fa-spin fa-spinner ms-2"></i></span>}</button>

        <a class="register-link text-muted d-block text-end mt-2" routerLink="/login">Already have an account? Login</a>
    </form>
</section>